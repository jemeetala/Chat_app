<%- include("layouts/header.ejs") %>
<h2 class="mb-4">Group Chatting</h2>

<div class="row">
  <div class="col-md-3">
    <ul class="list-group">
      <% if(myGroups.length> 0){ for(let i=0; i < myGroups.length; i++){ %>
      <li class="list-group-item list-group-item-dark cursor-pointer group-list" data-id="<%= myGroups[i]['_id'] %>">
        <img src="data:image/jpeg;base64,<%= myGroups[i]['image'] %>" alt="" height="50px" width="50px" />

        <%= myGroups[i]['name'] %>
      </li>

      <% } } %>
      <!--------group you joined-->

      <% if(joinedGroups.length> 0){ for(let i=0; i < joinedGroups.length; i++){ %>
      <li class="list-group-item list-group-item-dark cursor-pointer group-list" data-id="<%= joinedGroups[i]['group_id']['_id'] %>">
        <img src="data:image/jpeg;base64,<%= joinedGroups[i]['group_id']['image'] %>" alt="" height="50px" width="50px" />

        <%= joinedGroups[i]['group_id']['name'] %>
      </li>

      <% } } %>
    </ul>
  </div>

  <div class="col-md-8">
    <h3 class="group-start-head">Click to start the chat</h3>
    <div class="group-chat-section">
      <!-- <div id="group-chat-user-name" style="
          height: 50px;
          background-color: lightseagreen;
          color: snow;
          text-align: left;
          padding: 10px;
          text-transform: capitalize;
        "></div> -->
      <div id="group-chat-container"></div>
      <p id="typingIndicator"></p>

      <form action="" id="group-chat-form">
        <input type="text" name="message" placeholder="Enter message" id="group-message" class="border" required style="width: 95%; padding: 5px;" />
        <!-- <input type="submit" value="send message" class="btn btn-secondary"> -->
        <button type="submit" class="btn btn-outline-success">
          <i class="fa fa-paper-plane" aria-hidden="true" style="color: lightseagreen;"></i>
        </button>
      </form>
    </div>
  </div>
</div>

<!-- data-toggle="modal" data-target="#deleteChatModal" -->


<!--update  Modal -->
<div class="modal fade" id="editGroupChatModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Edit Chat</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form id="update-group-chat-form">
        <div class="modal-body">
          <input type="hidden" name="id" id="edit-group-message-id" />
          <input type="text" name="message" id="update-group-message" required placeholder="Enter message" />
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-outline-success">Edit</button>
        </div>
      </form>
    </div>
  </div>
</div>
<script></script>


<!--delete group chat Modal -->
<div class="modal fade" id="deleteGroupChatModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Delete Chat</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form id="delete-group-chat-form">
        <div class="modal-body">
          <input type="hidden" name="id" id="delete-group-message-id">
          <p>Are you sure you want to delete below Message ?</p>
          <p><b id="delete-group-message"></b></p>

        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-outline-success">Delete</button>
        </div>
      </form>
    </div>
  </div>
</div>
<%- include("layouts/footer.ejs") %>